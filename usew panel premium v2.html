<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KillerX Ultra Premium</title>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
<style>
  :root {
    --primary: #6c5ce7;
    --primary-dark: #5649c0;
    --secondary: #00cec9;
    --danger: #ff7675;
    --success: #00b894;
    --warning: #fdcb6e;
    --dark: #2d3436;
    --light: #f5f6fa;
    --gradient: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
  }
  
  * {
    margin: 0; 
    padding: 0; 
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Poppins', sans-serif;
    color: var(--light);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    position: relative;
    background: #0f0c29;
  }

  /* Ultra HD Liquid Background */
  .liquid-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    overflow: hidden;
  }

  .liquid-blob {
    position: absolute;
    border-radius: 50%;
    filter: blur(80px);
    opacity: 0.7;
    mix-blend-mode: screen;
    animation: float 25s infinite ease-in-out;
    will-change: transform;
  }

  .liquid-blob:nth-child(1) {
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    width: 800px;
    height: 800px;
    left: -200px;
    top: -200px;
    animation-delay: 0s;
    animation-duration: 20s;
  }

  .liquid-blob:nth-child(2) {
    background: linear-gradient(135deg, #2575fc 0%, #00cec9 100%);
    width: 600px;
    height: 600px;
    right: -150px;
    bottom: -150px;
    animation-delay: 5s;
    animation-duration: 25s;
  }

  .liquid-blob:nth-child(3) {
    background: linear-gradient(135deg, #00cec9 0%, #6a11cb 100%);
    width: 700px;
    height: 700px;
    right: 200px;
    top: 300px;
    animation-delay: 10s;
    animation-duration: 30s;
  }

  @keyframes float {
    0%, 100% {
      transform: translate(0, 0) rotate(0deg);
    }
    20% {
      transform: translate(100px, 150px) rotate(10deg);
    }
    40% {
      transform: translate(-80px, 200px) rotate(-5deg);
    }
    60% {
      transform: translate(120px, -100px) rotate(15deg);
    }
    80% {
      transform: translate(-50px, -150px) rotate(-10deg);
    }
  }

  /* Glass Morphism Container */
  .container {
    background: rgba(255, 255, 255, 0.08);
    border-radius: 24px;
    padding: 40px;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    text-align: center;
    width: 95%;
    max-width: 480px;
    animation: fadeInUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    z-index: 1;
  }
  
  .container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 6px;
    background: var(--gradient);
  }

  /* Neon Glow Effect */
  .container::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 24px;
    box-shadow: 0 0 20px rgba(108, 92, 231, 0.3),
                0 0 40px rgba(108, 92, 231, 0.2),
                0 0 80px rgba(108, 92, 231, 0.1);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
  }
  
  .container:hover::after {
    opacity: 1;
  }
  
  @keyframes fadeInUp {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
  }
  
  /* Header Styles */
  h1 {
    font-size: 32px;
    margin-bottom: 24px;
    font-weight: 600;
    background: linear-gradient(to right, #fff, #00cec9);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    position: relative;
    display: inline-block;
    text-shadow: 0 2px 10px rgba(0, 206, 201, 0.3);
  }
  
  h1::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: var(--secondary);
    border-radius: 3px;
    box-shadow: 0 0 10px var(--secondary);
  }
  
  /* Input Styles */
  input {
    width: 100%;
    padding: 16px 20px;
    margin-bottom: 20px;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    outline: none;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  input::placeholder {
    color: rgba(255, 255, 255, 0.6);
  }
  
  input:focus {
    background: rgba(255, 255, 255, 0.2);
    box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.3);
    border-color: var(--primary);
  }
  
  /* Button Styles */
  button {
    width: 100%;
    padding: 16px;
    border: none;
    border-radius: 12px;
    background: var(--primary);
    color: #fff;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    position: relative;
    overflow: hidden;
    z-index: 1;
  }
  
  button::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, 
      rgba(255,255,255,0.1) 0%, 
      rgba(255,255,255,0.3) 50%, 
      rgba(255,255,255,0.1) 100%);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
    z-index: -1;
  }
  
  button:hover::before {
    transform: translateX(100%);
  }
  
  button:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
  }
  
  button:active {
    transform: translateY(0);
  }
  
  /* Special Button Styles */
  .add-money {
    background-color: var(--success);
  }
  
  .add-money:hover {
    background-color: #00a383;
  }
  
  .logout {
    background-color: var(--danger);
  }
  
  .logout:hover {
    background-color: #e66767;
  }
  
  /* Points Display */
  .points {
    font-size: 64px;
    font-weight: 700;
    margin: 24px 0;
    background: linear-gradient(to right, #00cec9, #6c5ce7);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 4px 10px rgba(0, 206, 201, 0.3);
    position: relative;
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }
  
  .points::after {
    content: 'Points';
    position: absolute;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 14px;
    font-weight: 400;
    color: rgba(255, 255, 255, 0.7);
    letter-spacing: 1px;
  }
  
  /* Profile Image */
  .profile-img, .logo-img {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 20px;
    box-shadow: 0 0 20px rgba(108, 92, 231, 0.5);
    border: 3px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
    animation: floatImage 4s ease-in-out infinite;
  }
  
  @keyframes floatImage {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  
  /* Modal styles */
  .modal-bg {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    animation: fadeIn 0.3s ease;
    backdrop-filter: blur(5px);
  }
  
  .modal {
    background: rgba(30, 39, 46, 0.95);
    border-radius: 24px;
    padding: 30px;
    width: 95%;
    max-width: 400px;
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
    text-align: center;
    color: var(--light);
    animation: slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
  }
  
  .modal::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 6px;
    background: var(--gradient);
  }
  
  /* Transaction History Styles */
  .transaction-item {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-left: 4px solid var(--secondary);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .transaction-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent 0%, 
      rgba(255,255,255,0.1) 50%, 
      transparent 100%);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
  }
  
  .transaction-item:hover::before {
    transform: translateX(100%);
  }
  
  /* Responsive adjustments */
  @media (max-width: 480px) {
    .container {
      padding: 30px 20px;
      border-radius: 20px;
    }
    
    h1 {
      font-size: 26px;
    }
    
    .points {
      font-size: 48px;
    }
    
    .profile-img, .logo-img {
      width: 100px;
      height: 100px;
    }

    .liquid-blob {
      filter: blur(60px);
    }
    
    .liquid-blob:nth-child(1) {
      width: 600px;
      height: 600px;
    }
    
    .liquid-blob:nth-child(2) {
      width: 500px;
      height: 500px;
    }
    
    .liquid-blob:nth-child(3) {
      width: 550px;
      height: 550px;
    }
  }
</style>
</head>
<body>
  <!-- Ultra HD Liquid Background -->
  <div class="liquid-bg">
    <div class="liquid-blob"></div>
    <div class="liquid-blob"></div>
    <div class="liquid-blob"></div>
  </div>
  
  <div class="container">
    <div id="loginBox">
      <img src="https://firebasestorage.googleapis.com/v0/b/ng-mods-x2.appspot.com/o/Untitled_design_4.png?alt=media&token=c804a64c-a2ca-47ef-9f49-98d9a98d20d1" class="logo-img" alt="KillerX Logo" />
      <h1>KillerX Login</h1>
      <input type="text" id="username" placeholder="Enter your username" />
      <button onclick="login()">
        <i class="fas fa-sign-in-alt"></i> Login
      </button>
      <div class="error" id="error"></div>
    </div>

    <div id="dashboard" style="display: none;">
      <img src="https://firebasestorage.googleapis.com/v0/b/ng-mods-x2.appspot.com/o/Untitled_design_4.png?alt=media&token=c804a64c-a2ca-47ef-9f49-98d9a98d20d1" class="profile-img" alt="Profile" />
      <div class="user-info">
        <div class="user-name" id="displayName"></div>
        <div class="user-id">ID: <span id="userId"></span></div>
      </div>
      
      <div class="points" id="points">0</div>
      
      <button class="add-money" onclick="openModal()">
        <i class="fas fa-coins"></i> Add Money
      </button>
      <button class="logout" onclick="logout()">
        <i class="fas fa-sign-out-alt"></i> Logout
      </button>
      
      <button class="history-btn" onclick="showHistory()">
        <i class="fas fa-history"></i> Transaction History
      </button>
    </div>
  </div>

  <!-- Add Money Modal -->
  <div class="modal-bg" id="modalBg">
    <div class="modal modal-wrapper" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button class="close-btn" aria-label="Close modal" onclick="closeModal()">×</button>

      <h2 id="modalTitle"><i class="fas fa-wallet"></i> Select Amount</h2>
      <div class="amount-btns" id="amountBtns">
        <button data-amount="200"><i class="fas fa-taka-sign"></i> 200</button>
        <button data-amount="300"><i class="fas fa-taka-sign"></i> 300</button>
        <button data-amount="500"><i class="fas fa-taka-sign"></i> 500</button>
        <button data-amount="800"><i class="fas fa-taka-sign"></i> 800</button>
        <button data-amount="1000"><i class="fas fa-taka-sign"></i> 1000</button>
        <button data-amount="1500"><i class="fas fa-taka-sign"></i> 1500</button>
      </div>
      <div class="bonus-message" id="bonusMsg" style="display:none;">
        <i class="fas fa-gift"></i> Special bonus: Get 100 taka extra!
      </div>
      <div class="bonus-message" style="color:#00cec9; font-size:14px; margin:15px 0;">
        <i class="fas fa-info-circle"></i> Add 1000 taka or more to get 100 taka bonus!
      </div>
      <button class="confirm-btn" onclick="confirmAdd()" disabled>
        <i class="fas fa-check-circle"></i> Confirm & Pay
      </button>
    </div>
  </div>

  <!-- History Modal -->
  <div class="modal-bg" id="historyModal" style="display: none;">
    <div class="modal modal-wrapper">
      <button class="close-btn" onclick="closeHistoryModal()">×</button>
      <h2><i class="fas fa-history"></i> Transaction History</h2>
      <div id="historyList" style="max-height: 400px; overflow-y: auto; margin: 20px 0;">
        <div class="empty-history">
          <i class="fas fa-clock" style="font-size: 40px; margin-bottom: 15px; opacity: 0.5;"></i>
          <p>Loading transactions...</p>
        </div>
      </div>
    </div>
  </div>

<script>
  // Firebase config and init
  const firebaseConfig = {
    apiKey: "AIzaSyAueM2O16GbLJX4TmfK7g8IZfFJRMdh1WE",
    databaseURL: "https://ng-mods-x2-default-rtdb.firebaseio.com",
    projectId: "ng-mods-x2",
    storageBucket: "ng-mods-x2.appspot.com"
  };
  
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  let currentUser = null;
  let transactionListener = null;
  
  // Login logic
  function login() {
    const username = document.getElementById('username').value.trim();
    const error = document.getElementById('error');

    if (!username) {
      error.textContent = 'Please enter a username';
      return;
    }
    
    database.ref('users/' + username).once('value')
      .then(snapshot => {
        if (snapshot.exists()) {
          currentUser = username;
          showDashboard(username, snapshot.val());
          error.textContent = '';
        } else {
          error.textContent = 'User not found';
        }
      })
      .catch((error) => {
        document.getElementById('error').textContent = 'Login failed. Please try again.';
        console.error('Login error:', error);
      });
  }

  function showDashboard(username, points) {
    document.getElementById('displayName').textContent = username;
    document.getElementById('userId').textContent = username.substring(0, 8).toUpperCase();
    
    // Animate points counting up
    animatePoints(0, points || 0, 1500);

    // Listen for real-time updates to user points
    database.ref('users/' + username).on('value', snapshot => {
      const newPoints = snapshot.val() || 0;
      document.getElementById('points').textContent = newPoints;
    });

    document.getElementById('loginBox').style.display = 'none';
    document.getElementById('dashboard').style.display = 'block';
  }
  
  // Animate points counting up
  function animatePoints(start, end, duration) {
    const pointsElement = document.getElementById('points');
    let startTimestamp = null;
    
    const step = (timestamp) => {
      if (!startTimestamp) startTimestamp = timestamp;
      const progress = Math.min((timestamp - startTimestamp) / duration, 1);
      const value = Math.floor(progress * (end - start) + start);
      pointsElement.textContent = value;
      
      if (progress < 1) {
        window.requestAnimationFrame(step);
      }
    };
    
    window.requestAnimationFrame(step);
  }

  function logout() {
    if (currentUser) {
      database.ref('users/' + currentUser).off('value');
      if (transactionListener) {
        database.ref('transactions/' + currentUser).off('value', transactionListener);
        transactionListener = null;
      }
      currentUser = null;
    }
    document.getElementById('username').value = '';
    document.getElementById('loginBox').style.display = 'block';
    document.getElementById('dashboard').style.display = 'none';
    document.getElementById('error').textContent = '';
  }

  // Modal logic
  const modalBg = document.getElementById('modalBg');
  const amountBtns = document.getElementById('amountBtns').querySelectorAll('button');
  const bonusMsg = document.getElementById('bonusMsg');
  const confirmBtn = document.querySelector('.confirm-btn');
  let selectedAmount = null;

  function openModal() {
    if (!currentUser) {
      alert('Please login first!');
      return;
    }
    modalBg.style.display = 'flex';
    selectedAmount = null;
    confirmBtn.disabled = true;
    amountBtns.forEach(btn => btn.classList.remove('selected'));
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    modalBg.style.display = 'none';
    document.body.style.overflow = 'auto';
  }

  amountBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      amountBtns.forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      selectedAmount = parseInt(btn.getAttribute('data-amount'));
      confirmBtn.disabled = false;

      // Show bonus message for amounts >= 1000
      if (selectedAmount >= 1000) {
        bonusMsg.style.display = 'block';
      } else {
        bonusMsg.style.display = 'none';
      }
    });
  });

  function confirmAdd() {
    if (!selectedAmount || !currentUser) return;
    
    // Create transaction record
    const transactionId = Date.now().toString();
    const transactionData = {
      amount: selectedAmount,
      status: "pending",
      date: new Date().toISOString(),
      userId: currentUser
    };
    
    // Save to Firebase
    database.ref('transactions/' + currentUser + '/' + transactionId).set(transactionData)
      .then(() => {
        // Custom payment links based on amount
        const paymentLinks = {
          200: "https://example.com/payment/200",
          300: "https://example.com/payment/300",
          500: "https://example.com/payment/500",
          800: "https://example.com/payment/800",
          1000: "https://example.com/payment/1000",
          1500: "https://example.com/payment/1500"
        };

        const paymentUrl = paymentLinks[selectedAmount] || 'https://example.com/payment';
        
        // Open payment in new tab
        window.open(paymentUrl, '_blank');
        
        // Show success message
        alert(`Payment page for ${selectedAmount} taka opened. Complete the payment to add funds.`);
        closeModal();
      })
      .catch(error => {
        alert('Failed to create transaction. Please try again.');
        console.error('Transaction error:', error);
      });
  }
  
  // Transaction history functions
  function showHistory() {
    if (!currentUser) return;
    
    const historyModal = document.getElementById('historyModal');
    const historyList = document.getElementById('historyList');
    
    // Show loading state
    historyList.innerHTML = `
      <div class="empty-history">
        <i class="fas fa-spinner fa-spin" style="font-size: 40px; margin-bottom: 15px;"></i>
        <p>Loading transactions...</p>
      </div>
    `;
    
    historyModal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
    
    // Listen for transactions
    transactionListener = database.ref('transactions/' + currentUser).orderByKey().on('value', snapshot => {
      const transactions = snapshot.val();
      historyList.innerHTML = '';
      
      if (!transactions || Object.keys(transactions).length === 0) {
        historyList.innerHTML = `
          <div class="empty-history">
            <i class="fas fa-clock" style="font-size: 40px; margin-bottom: 15px; opacity: 0.5;"></i>
            <p>No transactions found</p>
          </div>
        `;
        return;
      }
      
      // Convert to array and sort by date (newest first)
      const transactionsArray = Object.entries(transactions).map(([id, tx]) => ({
        id,
        ...tx
      })).sort((a, b) => new Date(b.date) - new Date(a.date));
      
      // Display each transaction
      transactionsArray.forEach(tx => {
        const transactionElement = document.createElement('div');
        transactionElement.className = 'transaction-item';
        
        const date = new Date(tx.date);
        const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
        
        transactionElement.innerHTML = `
          <div class="transaction-icon">
            <i class="fas fa-${tx.status === 'completed' ? 'check-circle' : 'hourglass-half'}"></i>
          </div>
          <div class="transaction-details">
            <div class="transaction-amount">${tx.amount} Taka</div>
            <div>
              <span class="transaction-status status-${tx.status}">${tx.status}</span>
              <div class="transaction-date">${formattedDate}</div>
            </div>
          </div>
          <div>
            <i class="fas fa-chevron-right" style="opacity: 0.5;"></i>
          </div>
        `;
        
        historyList.appendChild(transactionElement);
      });
    }, error => {
      historyList.innerHTML = `
        <div class="empty-history">
          <i class="fas fa-exclamation-triangle" style="font-size: 40px; margin-bottom: 15px; color: #ff7675;"></i>
          <p>Failed to load transactions</p>
        </div>
      `;
      console.error('Transaction history error:', error);
    });
  }
  
  function closeHistoryModal() {
    if (transactionListener && currentUser) {
      database.ref('transactions/' + currentUser).off('value', transactionListener);
      transactionListener = null;
    }
    document.getElementById('historyModal').style.display = 'none';
    document.body.style.overflow = 'auto';
  }
</script>
</body>
</html>